# 更新日志

## v2.0.0-tp6
`v2.0.0 Technical Preview 6` `2021-08-01`

- 搜索栏可以使用 Shift + P 全局唤起了. (安装了`快捷键扩展`时)
- 自定义顶栏功能同步至 `v1.12.13`.
- 新增组件 `v1 设置迁移`, 可以导入 v1 设置了, README 中有使用说明.
- 支持[合集包](https://github.com/the1812/Bilibili-Evolved/blob/v2/doc/v1-migrate.md)安装, 设置面板中的批量安装可以接受任意类型的功能.
- `关于`面板中有了更多的链接, 并显示更详细的版本信息.

## v2.0.0-tp5
`v2.0.0 Technical Preview 5` `2021-07-24`

- 元数据中添加了 `@connect localhost`, 解决 Tampermonkey BETA 中不能从本地安装组件的问题.
- 修复 `LifeCycleEventTypes.ComponentsLoaded` 在组件运行完成前就触发的问题.
- 动态 API 支持自定义内容过滤器. (`动态过滤器`基于此 API 实现了对顶栏动态的过滤)
- 搜索栏的历史同步 b 站的搜索历史 (同 v1), 之前产生的历史数据可以通过运行以下代码来删除.
```js
delete bilibiliEvolved.settingsApis.getComponentSettings('launchBar').options.searchHistory
```
- 支持设置 `文件下载模式`.

**插件新增:**

- 下载视频 - IDM导出
- 搜索栏 - 搜索推荐

**组件迁移:**

所有常用组件已迁移完成, 剩余未迁移的还有:
- 工作量过大 (Coming S∞n)
  - 清爽首页
  - 极简首页
- 隐藏功能 (有一定缺陷所以未公开)
  - 网址AV号转换
  - 评论楼层显示
- 废弃功能 (被 b 站官方实现)
  - 默认视频画质
  - 解除音量上限

另外一部分组件功能还未更新到 v1.12.12 的进度:
- 下载视频
  - 不支持 ffmpeg 相关导出
  - 不支持课程 / 番剧 / 电影
- 自定义顶栏
  - 分区未更新
  - 搜索栏在搜索页没有同步搜索词
  - 历史面板中的直播没有状态显示
  - 收藏面板还不能记住上次选择的收藏夹
  - 收藏面板还不能显示已失效视频
  - 视频动态还不能显示发布时间
  - `排行`还没有子菜单
  - UI 样式未统一



## v2.0.0-tp4
`v2.0.0 Technical Preview 4` `2021-07-18`

**组件迁移:**
- 自动展开弹幕列表
- BiliPlus跳转支持
- 强制保留弹幕栏
- 隐藏推荐直播/视频推荐
- 直播间自动抽奖
- 直播首页静音/隐藏推荐直播
- 直播全屏弹幕栏/包裹
- 复制动态/评论链接
- 动态/评论翻译
> 移除了 Bing 翻译 (接口挂了), 翻译后可以实时更换翻译器 (#993)
- 动态/专栏图片导出
> 支持分别自定义命名格式, 不过具体说明还没写 (#1208)
- 启用细滚动条
- 高分辨率图片
- 简化首页
> 注意这个是 v1 中的 `首页过滤`, 更换为这个名字是为了和其他几个 `简化xxx` 功能保持一致. (都是移除某个页面中不需要的元素) 原 v1 中的 `简化首页` 会更换为 `清爽首页` 之类的名字.

**插件新增:**
- 设置面板 - '最近使用'类别
> 记录点开组件详情的时间, 让最近点开过的组件排序在上面

**其他:**
- `关于`页面中将显示本体的 commit hash
- `自动更新器`将自动跳过无在线链接(通过本地浏览安装)的功能.

**API 变更:**
  - 组件不再必需填写 `enabledByDefault`, 默认就为 `true`.
  - 组件的 `instantStyles` 会在开启/关闭时自动添加/移除了.
  - 设置面板的标签分类使用自定义过滤函数. (上面那个'最近使用'类别的插件就是基于此)

## v2.0.0-tp3
`v2.0.0 Technical Preview 3` `2021-07-09`

- 设置面板更新:
  - 修复高度过小时侧栏图标溢出面板
  - 支持批量安装功能
  - 支持设置导入/导出 (在关于面板中, 与 v1 不同的是导入后会自动刷新页面)
- 组件迁移:
  - 展开动态内容
  - 简化直播间
  - 直播勋章快速更换
  - 直播看板娘高DPI适配
  - 自动收起直播侧栏
  - 倍速记忆
  - 删除视频弹窗
  - 展开视频简介
  - 外置稍后再看
  - 启用快速收藏
  - 快捷键扩展
- 插件新增:
  - 下载视频 - aria2 输出支持
- 修复无法更新现有样式.
- 引入了 CSS `gap` 属性, 浏览器版本要求提高至 Chrome 84 / Firefox 80 / Safari 14.1
- 主脚本名称变动 (`Bilibili Evolved II`变为`Bilibili Evolved (v2)`), 更新时请多加注意.
- 生成了[功能列表文档](https://github.com/the1812/Bilibili-Evolved/blob/v2/doc/features/features.md).
> 好像只能装 GitHub 源的, jsDelivr 不知道为啥 Failed to fetch 了. 另外目前只能用 Stable 的版本, Preview 分支上还没有 v2 的文件.

## v2.0.0-tp2
`v2.0.0 Technical Preview 2` `2021-06-28`

- 设置面板更新:
  - 支持右侧停靠
  - 修复组件列表溢出面板
  - 动画效果调整
- 更新了动态 API (`src/components/feeds/api`)
- 组件迁移:
  - 禁止跳转动态详情
  - 直播信息扩充
  - 快速收起评论区
  - 展开动态标题
  - 动态反折叠
  - 删除直播水印
  - 专栏文字选择
  - 网址参数清理
  - 稍后再看重定向
  - 启用弹幕空降
  - 跳过充电鸣谢
- 自定义顶栏中的搜索改为默认不显示推荐词
- 样式输入格式改为与组件和插件一致 (使用 `.js` 文件), 修复样式无法卸载

## v2.0.0-tp1
`v2.0.0 Technical Preview 1` `2021-06-11`

此次 Release 为 v2.0.0 Technical Preview 1 (技术预览版), 请注意:
- 技术预览版仅供开发者或对此项目非常熟悉的用户体验, 如果你只对日常使用感兴趣, 请继续等待 v1 的后续更新.
- 主要是本体方面的换新, 功能模块尚未迁移完成, 因此还不能替代 v1 作为日常使用.
- 不保证稳定性, 可能有大量神秘 bug 潜伏.

欢迎来到 Bilibili Evolved v2 的第一个版本, 为了更长远的发展, 我完全重写了整个项目:
- 引入现代化前端工具 (webpack, Babel, PostCSS 等)
- 源代码 TypeScript 全覆盖 (webpack 等配置文件除外)
- 自带 UI 组件库 (基于 Vue)
- 移除对 jQuery 和 Vuex 的依赖
- 全新的架构设计, 本体大小可减小至 300+KB
- 不再有离线版, 你可以自行控制组件的更新

安装文件位于 [./dist/bilibili-evolved.user.js](./dist/bilibili-evolved.user.js) 或 [./dist/bilibili-evolved.preview.user.js](./dist/bilibili-evolved.user.js) , 虽然分了个预览版但目前还没有区别(

使用方法见 [README.md](./README.md#设置).

关于技术上的更详细的信息, 请参见[代码贡献指南](./CONTRIBUTING.md).

### 已完成功能
- 下载弹幕
- 夜间模式
  - 跟随系统 / 计划时段
- 删除广告
- 查看封面
- 简化评论区

### 待完成功能 (近期)
- 下载视频, 已支持普通视频源 + flv / dash 格式 + 显示链接 / aria2 输出, 待实现番剧 / 课程 / 手动输入源, 纯音频格式 + IDM 输出.
- 自定义顶栏, 目前仅实现至 v1.10.20 (commit 855bb6f)
- 视频卡片联合投稿显示支持
- 简化直播间
- 设置面板
  - 组件/插件/样式管理 - 文本 / 批量输入支持
  - "关于"页面
  - 停靠位置

### 你可能想问的其他问题

**v1 还会更新吗?**

在 v2 正式版发布前会保持更新, 只是频率可能慢些.

**v2 正式版何时发布?**

在功能迁移完成后, 会发布 v2 的预览版, 测试没有问题后就会发布正式版.

**是否会涵盖 v1 的所有功能?**

尽量会, 有些特别复杂的功能可能会在正式版发布之后再完成开发, 目前确定的有`简化首页`.

**本体体积缩小后, 还会在 GreasyFork 上发布吗?**

我拒绝.

**可以为 v2 开发组件了吗?**

可以弄些简单的玩玩, 复杂的组件建议等预览版发布后(接口基本稳定)再开发.
