!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports["live/badge-helper"]=n():e["live/badge-helper"]=n()}(self,(function(){return function(){var e,n,t={500:function(e,n,t){"use strict";t.d(n,{j9:function(){return d},Dx:function(){return s},KK:function(){return c},eB:function(){return p}});var a=t(663),o=t(109),l=coreApis.utils.log;function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}class r{constructor(e=!1,n=0){this.isActive=e,this.id=n}static parseJson(e,n){const t=JSON.parse(e);return 0!==t.code?((0,l.logError)(`${n.errorMessage} 错误码:${t.code} ${t.message||""}`),n.errorAction(t)):n.successAction(t)}}class d extends r{constructor(e){const{medal_id:n,status:t,level:a,medalName:o,uname:l,roomid:r,is_lighted:d}=e;super(1===t,n),i(this,"level",void 0),i(this,"name",void 0),i(this,"upName",void 0),i(this,"roomID",void 0),i(this,"isLighted",void 0),this.level=a,this.name=o,this.upName=l,this.roomID=r,this.isLighted=d}async activate(){return r.parseJson(await(0,a.postTextWithCredentials)("https://api.live.bilibili.com/xlive/web-room/v1/fansMedal/wear",(0,o.formData)({medal_id:this.id,csrf_token:(0,o.getCsrf)(),csrf:(0,o.getCsrf)()})),{successAction:()=>(this.isActive=!0,!0),errorAction:()=>!1,errorMessage:"佩戴勋章失败."})}async deactivate(){return r.parseJson(await(0,a.postTextWithCredentials)("https://api.live.bilibili.com/xlive/web-room/v1/fansMedal/take_off",(0,o.formData)({csrf_token:(0,o.getCsrf)(),csrf:(0,o.getCsrf)()})),{successAction:()=>(this.isActive=!1,!0),errorAction:()=>!1,errorMessage:"卸下勋章失败."})}}const c=async()=>{const{getTextWithCredentials:e}=await Promise.resolve().then(t.t.bind(t,663,23));return r.parseJson(await e("https://api.live.bilibili.com/i/api/medal?page=1&pageSize=256"),{successAction:e=>lodash.get(e,"data.fansMedalList",[]).map((e=>new d(e))),errorAction:()=>[],errorMessage:"无法获取勋章列表."})};class s extends r{constructor(e){const{id:n,cid:t,wear:a,css:o,name:l,source:r}=e;super(a,o),i(this,"tid",void 0),i(this,"cid",void 0),i(this,"name",void 0),i(this,"source",void 0),i(this,"imageUrl",void 0),this.tid=n,this.cid=t,this.name=l,this.source=r,s.getImageMap().then((e=>{this.imageUrl=e[this.id]}))}static async getImageMap(){if(void 0===s.imageMap){const{getTextWithCredentials:e}=await Promise.resolve().then(t.t.bind(t,663,23));return r.parseJson(await e("https://api.live.bilibili.com/rc/v1/Title/webTitles"),{successAction:e=>(s.imageMap={},e.data.forEach((e=>{s.imageMap[e.identification]=e.web_pic_url})),s.imageMap),errorAction:()=>({}),errorMessage:"获取头衔图片失败."})}return s.imageMap}async activate(){return r.parseJson(await(0,a.postTextWithCredentials)("https://api.live.bilibili.com/i/ajaxWearTitle",`id=${this.tid}&cid=${this.cid}&csrf=${(0,o.getCsrf)()}&csrf_token=${(0,o.getCsrf)()}`),{successAction:()=>(this.isActive=!0,!0),errorAction:()=>!1,errorMessage:"佩戴头衔失败."})}async deactivate(){return r.parseJson(await(0,a.postTextWithCredentials)("https://api.live.bilibili.com/i/ajaxCancelWearTitle",`csrf=${(0,o.getCsrf)()}&csrf_token=${(0,o.getCsrf)()}`),{successAction:()=>(this.isActive=!1,!0),errorAction:()=>!1,errorMessage:"卸下头衔失败."})}}i(s,"imageMap",void 0);const p=async()=>{const{getTextWithCredentials:e}=await Promise.resolve().then(t.t.bind(t,663,23));return r.parseJson(await e("https://api.live.bilibili.com/i/api/ajaxTitleInfo?page=1&pageSize=256&had=1"),{successAction:e=>lodash.get(e,"data.list",[]).map((e=>new s(e))),errorAction:()=>[],errorMessage:"无法获取头衔列表."})}},294:function(e,n,t){var a=t(645)((function(e){return e[1]}));a.push([e.id,".badge-popup[data-v-61d91d3c] {\n  top: 50%;\n  left: calc(100% + 8px);\n  transform: scale(0.9) translateY(-50%);\n  transform-origin: left;\n  padding: 4px;\n  background-color: #fff;\n  color: black;\n  border-radius: 8px;\n  box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.05);\n  border: 1px solid rgba(136,136,136,0.13333);\n  box-sizing: border-box;\n  border-radius: 4px;\n}\nbody.dark .badge-popup[data-v-61d91d3c] {\n  background-color: #282828;\n  color: #eee;\n  box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.2);\n}\n.badge-popup.open[data-v-61d91d3c] {\n  transform: scale(1) translateY(-50%);\n}\n.badge-popup[data-v-61d91d3c], .badge-popup *[data-v-61d91d3c] {\n  transition: 0.2s ease-out;\n}\n.badge-popup ul[data-v-61d91d3c] {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n}\n.badge-popup ul li[data-v-61d91d3c] {\n  border-radius: 4px;\n  cursor: pointer;\n  padding: 6px 8px;\n  display: flex;\n  justify-content: center;\n}\n.badge-popup ul li[data-v-61d91d3c]:hover {\n  background-color: rgba(136,136,136,0.13333);\n}\n.badge-popup ul li.active[data-v-61d91d3c] {\n  box-shadow: 0 0 0px 1px var(--theme-color), 0 0 0px 3px var(--theme-color-20);\n}\n.badge-popup ul li.gray[data-v-61d91d3c]:not(:hover) {\n  filter: grayscale(1);\n}\n.badge-popup ul li .title-image[data-v-61d91d3c] {\n  display: inline-block;\n  vertical-align: middle;\n  height: 20px;\n}\n.badge-popup ul li .fans-medal-item[data-v-61d91d3c] {\n  display: flex !important;\n  height: 14px;\n  line-height: 14px;\n  color: #fff;\n  border: 1px solid #48b6a5;\n  border-left: 0;\n  white-space: nowrap;\n  border-radius: 2px;\n  flex-shrink: 0;\n  font-size: 12px;\n}\n.badge-popup ul li .fans-medal-item .label[data-v-61d91d3c] {\n  width: 40px;\n  text-align: center;\n  padding: 0 2px;\n  color: #fff;\n  border-radius: 1px 0 0 1px;\n}\n.badge-popup ul li .fans-medal-item .level[data-v-61d91d3c] {\n  width: 16px;\n  background-color: #fff;\n  text-align: center;\n  color: #48b6a5;\n  border-radius: 0 1px 1px 0;\n}\n.badge-popup ul li .fans-medal-item .label[data-v-61d91d3c],\n.badge-popup ul li .fans-medal-item .level[data-v-61d91d3c] {\n  cursor: pointer;\n  position: relative;\n  display: block;\n  float: left;\n}\n.badge-popup ul li .level-1[data-v-61d91d3c] {\n  border-color: #48b6a5;\n  background-color: #48b6a5;\n}\n.badge-popup ul li .level-1 .label[data-v-61d91d3c] {\n  background-color: #48b6a5;\n}\n.badge-popup ul li .level-1 .level[data-v-61d91d3c] {\n  color: #48b6a5;\n}\n.badge-popup ul li .level-2[data-v-61d91d3c] {\n  border-color: #48b6a5;\n  background-color: #48b6a5;\n}\n.badge-popup ul li .level-2 .label[data-v-61d91d3c] {\n  background-color: #48b6a5;\n}\n.badge-popup ul li .level-2 .level[data-v-61d91d3c] {\n  color: #48b6a5;\n}\n.badge-popup ul li .level-3[data-v-61d91d3c] {\n  border-color: #48b6a5;\n  background-color: #48b6a5;\n}\n.badge-popup ul li .level-3 .label[data-v-61d91d3c] {\n  background-color: #48b6a5;\n}\n.badge-popup ul li .level-3 .level[data-v-61d91d3c] {\n  color: #48b6a5;\n}\n.badge-popup ul li .level-4[data-v-61d91d3c] {\n  border-color: #48b6a5;\n  background-color: #48b6a5;\n}\n.badge-popup ul li .level-4 .label[data-v-61d91d3c] {\n  background-color: #48b6a5;\n}\n.badge-popup ul li .level-4 .level[data-v-61d91d3c] {\n  color: #48b6a5;\n}\n.badge-popup ul li .level-5[data-v-61d91d3c] {\n  border-color: #5896de;\n  background-color: #5896de;\n}\n.badge-popup ul li .level-5 .label[data-v-61d91d3c] {\n  background-color: #5896de;\n}\n.badge-popup ul li .level-5 .level[data-v-61d91d3c] {\n  color: #5896de;\n}\n.badge-popup ul li .level-6[data-v-61d91d3c] {\n  border-color: #5896de;\n  background-color: #5896de;\n}\n.badge-popup ul li .level-6 .label[data-v-61d91d3c] {\n  background-color: #5896de;\n}\n.badge-popup ul li .level-6 .level[data-v-61d91d3c] {\n  color: #5896de;\n}\n.badge-popup ul li .level-7[data-v-61d91d3c] {\n  border-color: #5896de;\n  background-color: #5896de;\n}\n.badge-popup ul li .level-7 .label[data-v-61d91d3c] {\n  background-color: #5896de;\n}\n.badge-popup ul li .level-7 .level[data-v-61d91d3c] {\n  color: #5896de;\n}\n.badge-popup ul li .level-8[data-v-61d91d3c] {\n  border-color: #5896de;\n  background-color: #5896de;\n}\n.badge-popup ul li .level-8 .label[data-v-61d91d3c] {\n  background-color: #5896de;\n}\n.badge-popup ul li .level-8 .level[data-v-61d91d3c] {\n  color: #5896de;\n}\n.badge-popup ul li .level-9[data-v-61d91d3c] {\n  border-color: #a068f1;\n  background-color: #a068f1;\n}\n.badge-popup ul li .level-9 .label[data-v-61d91d3c] {\n  background-color: #a068f1;\n}\n.badge-popup ul li .level-9 .level[data-v-61d91d3c] {\n  color: #a068f1;\n}\n.badge-popup ul li .level-10[data-v-61d91d3c] {\n  border-color: #a068f1;\n  background-color: #a068f1;\n}\n.badge-popup ul li .level-10 .label[data-v-61d91d3c] {\n  background-color: #a068f1;\n}\n.badge-popup ul li .level-10 .level[data-v-61d91d3c] {\n  color: #a068f1;\n}\n.badge-popup ul li .level-11[data-v-61d91d3c] {\n  border-color: #a068f1;\n  background-color: #a068f1;\n}\n.badge-popup ul li .level-11 .label[data-v-61d91d3c] {\n  background-color: #a068f1;\n}\n.badge-popup ul li .level-11 .level[data-v-61d91d3c] {\n  color: #a068f1;\n}\n.badge-popup ul li .level-12[data-v-61d91d3c] {\n  border-color: #a068f1;\n  background-color: #a068f1;\n}\n.badge-popup ul li .level-12 .label[data-v-61d91d3c] {\n  background-color: #a068f1;\n}\n.badge-popup ul li .level-12 .level[data-v-61d91d3c] {\n  color: #a068f1;\n}\n.badge-popup ul li .level-13[data-v-61d91d3c] {\n  border-color: #ff86b2;\n  background-color: #ff86b2;\n}\n.badge-popup ul li .level-13 .label[data-v-61d91d3c] {\n  background-color: #ff86b2;\n}\n.badge-popup ul li .level-13 .level[data-v-61d91d3c] {\n  color: #ff86b2;\n}\n.badge-popup ul li .level-14[data-v-61d91d3c] {\n  border-color: #ff86b2;\n  background-color: #ff86b2;\n}\n.badge-popup ul li .level-14 .label[data-v-61d91d3c] {\n  background-color: #ff86b2;\n}\n.badge-popup ul li .level-14 .level[data-v-61d91d3c] {\n  color: #ff86b2;\n}\n.badge-popup ul li .level-15[data-v-61d91d3c] {\n  border-color: #ff86b2;\n  background-color: #ff86b2;\n}\n.badge-popup ul li .level-15 .label[data-v-61d91d3c] {\n  background-color: #ff86b2;\n}\n.badge-popup ul li .level-15 .level[data-v-61d91d3c] {\n  color: #ff86b2;\n}\n.badge-popup ul li .level-16[data-v-61d91d3c] {\n  border-color: #ff86b2;\n  background-color: #ff86b2;\n}\n.badge-popup ul li .level-16 .label[data-v-61d91d3c] {\n  background-color: #ff86b2;\n}\n.badge-popup ul li .level-16 .level[data-v-61d91d3c] {\n  color: #ff86b2;\n}\n.badge-popup ul li .level-17[data-v-61d91d3c] {\n  border-color: #f6be18;\n  background-color: #f6be18;\n}\n.badge-popup ul li .level-17 .label[data-v-61d91d3c] {\n  background-color: #f6be18;\n}\n.badge-popup ul li .level-17 .level[data-v-61d91d3c] {\n  color: #f6be18;\n}\n.badge-popup ul li .level-18[data-v-61d91d3c] {\n  border-color: #f6be18;\n  background-color: #f6be18;\n}\n.badge-popup ul li .level-18 .label[data-v-61d91d3c] {\n  background-color: #f6be18;\n}\n.badge-popup ul li .level-18 .level[data-v-61d91d3c] {\n  color: #f6be18;\n}\n.badge-popup ul li .level-19[data-v-61d91d3c] {\n  border-color: #f6be18;\n  background-color: #f6be18;\n}\n.badge-popup ul li .level-19 .label[data-v-61d91d3c] {\n  background-color: #f6be18;\n}\n.badge-popup ul li .level-19 .level[data-v-61d91d3c] {\n  color: #f6be18;\n}\n.badge-popup ul li .level-20[data-v-61d91d3c] {\n  border-color: #f6be18;\n  background-color: #f6be18;\n}\n.badge-popup ul li .level-20 .label[data-v-61d91d3c] {\n  background-color: #f6be18;\n}\n.badge-popup ul li .level-20 .level[data-v-61d91d3c] {\n  color: #f6be18;\n}",""]),e.exports=a},645:function(e){"use strict";
// eslint-disable-next-line func-names
e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t=e(n);return n[2]?"@media ".concat(n[2]," {").concat(t,"}"):t})).join("")},
// eslint-disable-next-line func-names
n.i=function(e,t,a){"string"==typeof e&&(
// eslint-disable-next-line no-param-reassign
e=[[null,e,""]]);var o={};if(a)for(var l=0;l<this.length;l++){
// eslint-disable-next-line prefer-destructuring
var i=this[l][0];null!=i&&(o[i]=!0)}for(var r=0;r<e.length;r++){var d=[].concat(e[r]);a&&o[d[0]]||(t&&(d[2]?d[2]="".concat(t," and ").concat(d[2]):d[2]=t),n.push(d))}},n}},379:function(e,n,t){"use strict";var a,o=function(){return void 0===a&&(
// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805
// @see https://github.com/webpack-contrib/style-loader/issues/177
a=Boolean(window&&document&&document.all&&!window.atob)),a},l=function(){var e={};return function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}e[n]=t}return e[n]}}(),i=[];function r(e){for(var n=-1,t=0;t<i.length;t++)if(i[t].identifier===e){n=t;break}return n}function d(e,n){for(var t={},a=[],o=0;o<e.length;o++){var l=e[o],d=n.base?l[0]+n.base:l[0],c=t[d]||0,s="".concat(d," ").concat(c);t[d]=c+1;var p=r(s),u={css:l[1],media:l[2],sourceMap:l[3]};-1!==p?(i[p].references++,i[p].updater(u)):i.push({identifier:s,updater:g(u,n),references:1}),a.push(s)}return a}function c(e){var n=document.createElement("style"),a=e.attributes||{};if(void 0===a.nonce){var o=t.nc;o&&(a.nonce=o)}if(Object.keys(a).forEach((function(e){n.setAttribute(e,a[e])})),"function"==typeof e.insert)e.insert(n);else{var i=l(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}return n}var s,p=(s=[],function(e,n){return s[e]=n,s.filter(Boolean).join("\n")});function u(e,n,t,a){var o=t?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(e.styleSheet)e.styleSheet.cssText=p(n,o);else{var l=document.createTextNode(o),i=e.childNodes;i[n]&&e.removeChild(i[n]),i.length?e.insertBefore(l,i[n]):e.appendChild(l)}}function b(e,n,t){var a=t.css,o=t.media,l=t.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),l&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(l))))," */")),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}var f=null,v=0;function g(e,n){var t,a,o;if(n.singleton){var l=v++;t=f||(f=c(n)),a=u.bind(null,t,l,!1),o=u.bind(null,t,l,!0)}else t=c(n),a=b.bind(null,t,n),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)};return a(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;a(e=n)}else o()}}e.exports=function(e,n){(n=n||{}).singleton||"boolean"==typeof n.singleton||(n.singleton=o());var t=d(e=e||[],n);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var a=0;a<t.length;a++){var o=r(t[a]);i[o].references--}for(var l=d(e,n),c=0;c<t.length;c++){var s=r(t[c]);0===i[s].references&&(i[s].updater(),i.splice(s,1))}t=l}}}},905:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return b}});var a=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"multiple-widgets"},[t("VPopup",{staticClass:"badge-popup medal",attrs:{"trigger-element":e.$refs.medalButton},model:{value:e.medalOpen,callback:function(n){e.medalOpen=n},expression:"medalOpen"}},[t("ul",e._l(e.medalList,(function(n){return t("li",{key:n.id,class:{active:n.isActive,gray:!n.isLighted},attrs:{"data-id":n.id,title:n.upName},on:{click:function(t){return e.toggleBadge(n,e.medalList)}}},[t("div",{staticClass:"fans-medal-item",class:["level-"+n.level]},[t("span",{staticClass:"label"},[e._v(e._s(n.name))]),e._v(" "),t("span",{staticClass:"level"},[e._v(e._s(n.level))])])])})),0)]),e._v(" "),t("DefaultWidget",{ref:"medalButton",attrs:{icon:"mdi-medal"},on:{click:function(n){e.medalOpen=!e.medalOpen}}},[t("span",[e._v("更换勋章")])]),e._v(" "),t("VPopup",{staticClass:"badge-popup title",attrs:{"trigger-element":e.$refs.titleButton},model:{value:e.titleOpen,callback:function(n){e.titleOpen=n},expression:"titleOpen"}},[t("ul",e._l(e.titleList,(function(n){return t("li",{key:n.id,class:{active:n.isActive},attrs:{"data-id":n.id},on:{click:function(t){return e.toggleBadge(n,e.titleList)}}},[t("img",{staticClass:"title-image",attrs:{src:n.imageUrl}})])})),0)]),e._v(" "),t("DefaultWidget",{ref:"titleButton",attrs:{icon:"mdi-script-outline"},on:{click:function(n){e.titleOpen=!e.titleOpen}}},[t("span",[e._v("更换头衔")])])],1)};a._withStripped=!0;var o=coreApis.ui,l=t(500),i=Vue.extend({components:{DefaultWidget:o.DefaultWidget,VPopup:o.VPopup},data:()=>({medalList:[],titleList:[],medalOpen:!1,titleOpen:!1}),async mounted(){this.loadMedalList(),await l.Dx.getImageMap(),this.loadTitleList()},methods:{async loadMedalList(){this.medalList=await(0,l.KK)()},async loadTitleList(){this.titleList=await(0,l.eB)()},async toggleBadge(e,n){if(console.log(e),e.isActive)e.isActive=!1,await e.deactivate();else{const a=n.find((e=>e.isActive));if(a&&(a.isActive=!1),e.isActive=!0,await e.activate(),e instanceof l.j9){const{getComponentSettings:n}=await Promise.resolve().then(t.t.bind(t,407,23));n("badgeHelper").options.defaultMedalID=e.id}}e instanceof l.j9?await this.loadMedalList():e instanceof l.Dx&&await this.loadTitleList()}}}),r=t(379),d=t.n(r),c=t(294),s=t.n(c),p={insert:"head",singleton:!1};d()(s(),p),s().locals;var u=function(e,n,t,a,o,l,i,r){var d,c="function"==typeof e?e.options:e;if(n&&(c.render=n,c.staticRenderFns=t,c._compiled=!0),a&&(c.functional=!0),l&&(c._scopeId="data-v-"+l),i?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},c._ssrRegister=d):o&&(d=r?function(){o.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:o),d)if(c.functional){c._injectStyles=d;var s=c.render;c.render=function(e,n){return d.call(n),s(e,n)}}else{var p=c.beforeCreate;c.beforeCreate=p?[].concat(p,d):[d]}return{exports:e,options:c}}(i,a,[],!1,null,"61d91d3c",null);u.options.__file="registry/lib/components/live/badge-helper/BadgeHelper.vue";var b=u.exports},663:function(e){"use strict";e.exports=coreApis.ajax},407:function(e){"use strict";e.exports=coreApis.settings},109:function(e){"use strict";e.exports=coreApis.utils}},a={};function o(e){var n=a[e];if(void 0!==n)return n.exports;var l=a[e]={id:e,exports:{}};return t[e](l,l.exports,o),l.exports}o.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(n,{a:n}),n},n=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},o.t=function(t,a){if(1&a&&(t=this(t)),8&a)return t;if("object"==typeof t&&t){if(4&a&&t.__esModule)return t;if(16&a&&"function"==typeof t.then)return t}var l=Object.create(null);o.r(l);var i={};e=e||[null,n({}),n([]),n(n)];for(var r=2&a&&t;"object"==typeof r&&!~e.indexOf(r);r=n(r))Object.getOwnPropertyNames(r).forEach((function(e){i[e]=function(){return t[e]}}));return i.default=function(){return t},o.d(l,i),l},o.d=function(e,n){for(var t in n)o.o(n,t)&&!o.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var l={};return function(){"use strict";o.d(l,{component:function(){return t}});var e=o(109),n=o(500);const t={name:"badgeHelper",displayName:"直播勋章快速更换",description:{"zh-CN":"在直播区中, 可从功能面板中直接切换勋章和头衔."},enabledByDefault:!0,entry:()=>(async()=>{const{getComponentSettings:e}=await Promise.resolve().then(o.t.bind(o,407,23)),{options:t}=e("badgeHelper");if(!t.autoMatchMedal)return;const a=document.URL.match(/^https:\/\/live\.bilibili\.com\/(blanc\/)?([\d]+)/);if(!a)return;const l=parseInt(a[2]);if(Number.isNaN(l))return void console.warn("roomID not found");const i=await(0,n.KK)();if(!t.defaultMedalID){const e=i.find((e=>e.isActive));e&&(t.defaultMedalID=e.id,console.log(`set defaultMedalID to activeMedal (${e.id})`))}const r=t.defaultMedalID?i.find((e=>e.id===t.defaultMedalID)):i.find((e=>e.isActive)),d=i.find((e=>e.roomID===l));d?(await d.activate(),console.log(`activated matchMedal (${d.id})`)):r&&(await r.activate(),console.log(`no matchMedal, fallback to defaultMedal (${r.id})`))})(),reload:e.none,unload:e.none,tags:[componentsTags.live],widget:{component:()=>Promise.resolve().then(o.bind(o,905)).then((e=>e.default)),condition:()=>Boolean((0,e.getUID)())},options:{autoMatchMedal:{defaultValue:!0,displayName:"自动佩戴当前直播间勋章"},defaultMedalID:{displayName:"默认勋章ID",hidden:!0,defaultValue:0}},urlInclude:["//live.bilibili.com"]}}(),l=l.component}()}));